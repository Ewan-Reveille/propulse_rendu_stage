<!DOCTYPE html>
<html>

<head>
  <title>Propulse</title>
</head>

<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  form {
    background-color: #ffffff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  input[type="file"] {
    display: block;
    margin-bottom: 10px;
  }

  button[type="submit"] {
    background-color: #007bff;
    color: #ffffff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button[type="submit"]:hover {
    background-color: #0056b3;
  }
</style>

<body>
  <form action="/process_csv" method="post" enctype="multipart/form-data">
    <input type="file" name="file">
    <button type="submit">Modifier CSV</button>
  </form>

  <script>
    const fileUpload = document.getElementById('file-upload');
    const csvDataDiv = document.getElementById('csv-data');

    fileUpload.addEventListener('change', function (e) {
      const file = e.target.files[0];
      const reader = new FileReader();

      reader.onload = function (event) {
        const csvContent = event.target.result;
        const data = csvContent.split(/\r?\n/);

        const table = document.createElement('table');

        const headerRow = document.createElement('tr');
        for (let i = 0; i < data[0].split(',').length; i++) {
          const headerCell = document.createElement('th');
          headerCell.innerText = `Column ${i + 1}`;
          headerRow.appendChild(headerCell);
        }
        table.appendChild(headerRow);

        // Loop through data rows
        for (let i = 1; i < data.length; i++) {
          const row = data[i].split(',');
          const tableRow = document.createElement('tr');
          for (let j = 0; j < row.length; j++) {
            const cell = document.createElement('td');
            cell.innerText = row[j];
            tableRow.appendChild(cell);
          }
          table.appendChild(tableRow);
        }

        csvDataDiv.innerHTML = ""; // Clear previous content (if any)
        csvDataDiv.appendChild(table);
      };

      reader.readAsText(file);
    });
  </script>
</body>

</html>